<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School-Based Distribution of ITNs - Sierra Leone</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
    <!-- MAIN CONTENT -->
    <div class="main-content show" id="mainContent">
        <div class="page-container">

            <!-- ===== HEADER ===== -->
            <div class="page-header">
                <div class="header-logos">
                    <img src="https://github.com/mohamedsillahkanu/gdp-dashboard-2/raw/6c7463b0d5c3be150aafae695a4bcbbd8aeb1499/ICF-SL.jpg" alt="ICF-SL Logo" class="header-logo-main">
                </div>
                <h3>Informatics Consultancy Firm-Sierra Leone<br>(ICF-SL)</h3>
                <p class="tagline"><em>Driving Data-Driven Solutions for Health and Development</em></p>
                <div class="header-divider"></div>
                <h1>SCHOOL-BASED DISTRIBUTION OF ITNs</h1>
                <p class="subtitle">Insecticide-Treated Nets Distribution Survey - Sierra Leone</p>
            </div>

            <!-- ===== PARTNER LOGOS BAR ===== -->
            <div class="partners-section">
                <div class="partners-label">IMPLEMENTING PARTNERS</div>
                <div class="partners-grid">
                    <div class="partner-logo-card">
                        <div class="partner-logo-placeholder">
                            <img src="partner_logo_1.png" alt="Partner Logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="partner-fallback-icon">üè•</div>
                        </div>
                        <span class="partner-name">MoHS</span>
                    </div>
                    <div class="partner-logo-card">
                        <div class="partner-logo-placeholder">
                            <img src="partner_logo_2.png" alt="Partner Logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="partner-fallback-icon">ü¶ü</div>
                        </div>
                        <span class="partner-name">NMCP</span>
                    </div>
                    <div class="partner-logo-card">
                        <div class="partner-logo-placeholder">
                            <img src="partner_logo_3.png" alt="Partner Logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="partner-fallback-icon">üåç</div>
                        </div>
                        <span class="partner-name">WHO</span>
                    </div>
                    <div class="partner-logo-card">
                        <div class="partner-logo-placeholder">
                            <img src="partner_logo_4.png" alt="Partner Logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="partner-fallback-icon">üåê</div>
                        </div>
                        <span class="partner-name">Global Fund</span>
                    </div>
                    <div class="partner-logo-card">
                        <div class="partner-logo-placeholder">
                            <img src="partner_logo_5.png" alt="Partner Logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="partner-fallback-icon">ü¶Ñ</div>
                        </div>
                        <span class="partner-name">UNICEF</span>
                    </div>
                    <div class="partner-logo-card">
                        <div class="partner-logo-placeholder">
                            <img src="partner_logo_6.png" alt="Partner Logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="partner-fallback-icon">üíª</div>
                        </div>
                        <span class="partner-name">ICF-SL</span>
                    </div>
                </div>
            </div>

            <!-- ===== PHOTO FRAME ===== -->
            <div class="photo-frame-section">
                <div class="photo-frame">
                    <div class="photo-inner">
                        <img src="distribution_photo.jpg" alt="ITN Distribution" id="coverPhoto" 
                             onerror="this.style.display='none'; document.getElementById('photoPlaceholder').style.display='flex';">
                        <div class="photo-placeholder" id="photoPlaceholder">
                            <div class="photo-placeholder-icon">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#004080" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                    <circle cx="8.5" cy="8.5" r="1.5"/>
                                    <polyline points="21 15 16 10 5 21"/>
                                </svg>
                            </div>
                            <p class="photo-placeholder-text">DISTRIBUTION PHOTO</p>
                            <p class="photo-placeholder-hint">Place <strong>distribution_photo.jpg</strong> in the same folder to display here</p>
                        </div>
                    </div>
                    <div class="photo-caption">
                        <span class="photo-caption-icon">üì∏</span>
                        School-Based ITN Distribution Campaign ‚Äî Sierra Leone
                    </div>
                </div>
            </div>

            <!-- ===== INTRODUCTION ===== -->
            <div class="intro-section">
                <div class="intro-header">
                    <div class="intro-icon">üõèÔ∏è</div>
                    <h2 class="intro-title">ABOUT THIS SURVEY</h2>
                </div>
                <div class="intro-body">
                    <p class="intro-text">
                        The <strong>School-Based Distribution of Insecticide-Treated Nets (ITNs)</strong> is a key 
                        malaria prevention strategy implemented by the <strong>National Malaria Control Programme (NMCP)</strong> 
                        under the <strong>Ministry of Health and Sanitation (MoHS)</strong> of Sierra Leone, in partnership with 
                        WHO, Global Fund, UNICEF, and other stakeholders.
                    </p>
                    <p class="intro-text">
                        This survey tool is designed to capture real-time data on ITN distribution activities conducted 
                        through schools across all districts in Sierra Leone. It collects information on student enrollment, 
                        ITN supply and distribution, logistics, challenges, and outcomes to support evidence-based 
                        decision-making and programme monitoring.
                    </p>
                    <div class="intro-highlights">
                        <div class="intro-highlight-item">
                            <div class="highlight-icon">üè´</div>
                            <div>
                                <div class="highlight-title">SCHOOL-BASED APPROACH</div>
                                <div class="highlight-desc">Leveraging schools as distribution points to reach school-age children with ITNs</div>
                            </div>
                        </div>
                        <div class="intro-highlight-item">
                            <div class="highlight-icon">üì±</div>
                            <div>
                                <div class="highlight-title">DIGITAL DATA COLLECTION</div>
                                <div class="highlight-desc">Offline-capable with GPS tracking, real-time sync, and automated analysis</div>
                            </div>
                        </div>
                        <div class="intro-highlight-item">
                            <div class="highlight-icon">üìä</div>
                            <div>
                                <div class="highlight-title">REAL-TIME MONITORING</div>
                                <div class="highlight-desc">Instant dashboard analytics for coverage tracking and programme oversight</div>
                            </div>
                        </div>
                    </div>
                    <div class="intro-note">
                        <strong>üìã Instructions:</strong> Complete all sections of this form during or immediately after 
                        ITN distribution at each school. You can save drafts and submit when connected to the internet. 
                        All fields marked with <span class="required">*</span> are required.
                    </div>
                </div>
            </div>

            <!-- ===== CONTROLS ===== -->
            <div class="controls-bar">
                <button class="control-btn" id="viewDataBtn">üìä VIEW DATA</button>
                <button class="control-btn" id="viewAnalysisBtn">üìà VIEW ANALYSIS</button>
                <button class="control-btn draft-btn" id="viewDraftsBtn">üìù VIEW DRAFTS</button>
            </div>

            <!-- ===== STATUS BAR ===== -->
            <div class="status-bar">
                <div class="status-item">
                    <div class="status-indicator" id="statusIndicator"></div>
                    <span class="status-text" id="statusText">CHECKING...</span>
                </div>
                <div class="status-item">
                    <span style="color: #000000; font-size: 12px;">DRAFTS:</span>
                    <span class="draft-count" id="draftCount">0</span>
                </div>
                <div class="status-item">
                    <span style="color: #000000; font-size: 12px;">PENDING:</span>
                    <span class="pending-count" id="pendingCount">0</span>
                </div>
            </div>

            <!-- ===== FORM CARD ===== -->
            <div class="form-card">
                <div class="form-content">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                    <div class="progress-text" id="progressText">SECTION 1 OF 6 <span id="formStatusBadge"></span></div>

                    <form id="dataForm">
                        <input type="hidden" name="form_status" id="form_status" value="draft">
                        <input type="hidden" name="draft_id" id="draft_id" value="">
                        <div id="dynamicSections"></div>
                    </form>
                </div>
            </div>

            <!-- ===== FOOTER ===== -->
            <div class="page-footer">
                <p class="footer-main">School-Based Distribution of Insecticide-Treated Nets (ITNs)</p>
                <p>Informatics Consultancy Firm-Sierra Leone (ICF-SL)</p>
                <p class="footer-location">Freetown, Sierra Leone</p>
                <div class="footer-partners-mini">
                    MoHS &bull; NMCP &bull; WHO &bull; Global Fund &bull; UNICEF &bull; ICF-SL
                </div>
                <p class="footer-copy">¬© 2025 Informatics Consultancy Firm-Sierra Leone (ICF-SL). All rights reserved.</p>
            </div>
        </div>
    </div>

    <!-- DRAFTS MODAL -->
    <div class="modal-overlay" id="draftsModal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">üìù SAVED DRAFTS</span>
                <button class="modal-close" onclick="closeDraftsModal()">&times;</button>
            </div>
            <div class="modal-body" id="draftsModalBody"></div>
        </div>
    </div>

    <!-- DRAFT NAME MODAL -->
    <div class="draft-name-modal" id="draftNameModal">
        <div class="draft-name-content">
            <div class="draft-name-header">
                <h3 class="draft-name-title">üíæ SAVE DRAFT</h3>
            </div>
            <div class="draft-name-body">
                <label class="draft-name-label">ENTER A NAME FOR THIS DRAFT:</label>
                <input type="text" class="draft-name-input" id="draftNameInput" placeholder="e.g., St. Joseph Primary - Bo District">
                <div class="draft-name-buttons">
                    <button class="draft-name-btn cancel" onclick="cancelDraftName()">CANCEL</button>
                    <button class="draft-name-btn save" onclick="confirmSaveDraft()">SAVE DRAFT</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ANALYSIS DASHBOARD MODAL -->
    <div class="analysis-modal" id="analysisModal">
        <div class="analysis-content">
            <div class="analysis-header">
                <span class="analysis-title">üìà ITN DISTRIBUTION ANALYSIS DASHBOARD</span>
                <button class="analysis-close" onclick="closeAnalysisModal()">&times;</button>
            </div>
            <div class="analysis-body" id="analysisBody">
                <div class="analysis-loading"><p>Loading analysis data...</p></div>
            </div>
        </div>
    </div>

    <!-- NOTIFICATION -->
    <div class="notification" id="notification">
        <span class="notification-text" id="notificationText"></span>
    </div>

    <script src="script.js"></script>
</body>
</html>
